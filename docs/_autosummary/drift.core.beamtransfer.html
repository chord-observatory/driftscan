<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>drift.core.beamtransfer &mdash; driftscan 0+untagged.1.g6e6b6d1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="drift.core.crosspower" href="drift.core.crosspower.html" />
    <link rel="prev" title="drift.core" href="drift.core.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> driftscan
          </a>
              <div class="version">
                0+untagged.1.g6e6b6d1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of Driftscan</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../reference.html">Programming References</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../reference.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="drift.core.html">drift.core</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">drift.core.beamtransfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.crosspower.html">drift.core.crosspower</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.doublekl.html">drift.core.doublekl</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.kltransform.html">drift.core.kltransform</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.manager.html">drift.core.manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.psestimation.html">drift.core.psestimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.psmc.html">drift.core.psmc</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.skymodel.html">drift.core.skymodel</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.telescope.html">drift.core.telescope</a></li>
<li class="toctree-l4"><a class="reference internal" href="drift.core.visibility.html">drift.core.visibility</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="drift.pipeline.html">drift.pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="drift.scripts.html">drift.scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="drift.telescope.html">drift.telescope</a></li>
<li class="toctree-l3"><a class="reference internal" href="drift.util.html">drift.util</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">driftscan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../reference.html">Programming References</a> &raquo;</li>
          <li><a href="drift.core.html">drift.core</a> &raquo;</li>
      <li>drift.core.beamtransfer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/drift.core.beamtransfer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-drift.core.beamtransfer">
<span id="drift-core-beamtransfer"></span><h1>drift.core.beamtransfer<a class="headerlink" href="#module-drift.core.beamtransfer" title="Permalink to this headline">¶</a></h1>
<p>Calculation and management of Beam Transfer matrices</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">matrix_image</span></code>(A[, rtol, atol, errmsg])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">matrix_nullspace</span></code>(A[, rtol, atol, errmsg])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#drift.core.beamtransfer.svd_gen" title="drift.core.beamtransfer.svd_gen"><code class="xref py py-obj docutils literal notranslate"><span class="pre">svd_gen</span></code></a>(A[, errmsg])</p></td>
<td><p>Find the inverse of A.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#drift.core.beamtransfer.BeamTransfer" title="drift.core.beamtransfer.BeamTransfer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamTransfer</span></code></a>(directory[, telescope])</p></td>
<td><p>A class for reading and writing Beam Transfer matrices from disk.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#drift.core.beamtransfer.BeamTransferFullSVD" title="drift.core.beamtransfer.BeamTransferFullSVD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamTransferFullSVD</span></code></a>(directory[, telescope])</p></td>
<td><p>BeamTransfer class that performs the old temperature only SVD.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#drift.core.beamtransfer.BeamTransferNoSVD" title="drift.core.beamtransfer.BeamTransferNoSVD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamTransferNoSVD</span></code></a>(directory[, telescope])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#drift.core.beamtransfer.BeamTransferTempSVD" title="drift.core.beamtransfer.BeamTransferTempSVD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamTransferTempSVD</span></code></a>(directory[, telescope])</p></td>
<td><p>BeamTransfer class that performs the old temperature only SVD.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt id="drift.core.beamtransfer.BeamTransfer">
<em class="property">class </em><code class="sig-prename descclassname">drift.core.beamtransfer.</code><code class="sig-name descname">BeamTransfer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">telescope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">caput.config.Reader</span></code></p>
<p>A class for reading and writing Beam Transfer matrices from disk.</p>
<p>In addition this provides methods for projecting vectors and matrices
between the sky and the telescope basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>string</em>) – Path of directory to read and write Beam Transfers from.</p></li>
<li><p><strong>telescope</strong> (<a class="reference internal" href="drift.core.telescope.html#drift.core.telescope.TransitTelescope" title="drift.core.telescope.TransitTelescope"><em>drift.core.telescope.TransitTelescope</em></a><em>, </em><em>optional</em>) – Telescope object to use for calculation. If <cite>None</cite> (default), try to
load a cached version from the given directory.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.mem_chunk">
<code class="sig-name descname">mem_chunk</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.mem_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount of memory to use per process in this calculation in GB. This is a
target and not a strict upper limit.  This will change the number of chunks the
calculation is split into. Default is 3 GB.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.svcut">
<code class="sig-name descname">svcut</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.svcut" title="Permalink to this definition">¶</a></dt>
<dd><p>The relative precision below the maximum singular value to exclude low
sensitivity SVD modes. This can be dynamically changed as it is evaluated
when performing projections.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.polsvcut">
<code class="sig-name descname">polsvcut</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.polsvcut" title="Permalink to this definition">¶</a></dt>
<dd><p>The relative precision below the maximum value to assume the polarisation
sensitivity is zero. This is used to find the polarisation null space. This
is used to generate the cached SVD modes and so cannot be changed after they
are generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.truncate">
<code class="sig-name descname">truncate</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether precision truncation of the beam transfer matrices should be done.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.truncate_rel">
<code class="sig-name descname">truncate_rel</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.truncate_rel" title="Permalink to this definition">¶</a></dt>
<dd><p>The relative per element precision to use for the truncation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.truncate_maxl">
<code class="sig-name descname">truncate_maxl</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.truncate_maxl" title="Permalink to this definition">¶</a></dt>
<dd><p>The truncation precision to use relative the maximum value for all l’s of
that mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="drift.core.beamtransfer.BeamTransfer.chunk_cache_size">
<code class="sig-name descname">chunk_cache_size</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.chunk_cache_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The size of the per m-file HDF5 chunk cache. Default is 128 MB.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.beam_m">
<code class="sig-name descname">beam_m</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">fi</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.beam_m" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the beam transfer matrix for a given m.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p></li>
<li><p><strong>fi</strong> (<em>integer</em>) – frequency block to fetch. fi=None (default) returns all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, 2, npairs, npol_sky, lmax+1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.beam_singularvalues">
<code class="sig-name descname">beam_singularvalues</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.beam_singularvalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the vector of beam singular values for a given m.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, svd_len)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.beam_svd">
<code class="sig-name descname">beam_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">fi</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.beam_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the SVD beam transfer matrix (S V^H) for a given m. This SVD beam
transfer projects from the sky into the SVD basis.</p>
<p>This returns the full SVD spectrum. Cutting based on SVD value must be
done by other routines (see project*svd methods).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p></li>
<li><p><strong>fi</strong> (<em>integer</em>) – frequency block to fetch. fi=None (default) returns all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, svd_len, npol_sky, lmax+1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.beam_ut">
<code class="sig-name descname">beam_ut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">fi</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.beam_ut" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the SVD beam transfer matrix (U^H) for a given m. This SVD beam
transfer projects from the telescope space into the SVD basis.</p>
<p>This returns the full SVD spectrum. Cutting based on SVD value must be
done by other routines (see project*svd methods).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p></li>
<li><p><strong>fi</strong> (<em>integer</em>) – frequency block to fetch. fi=None (default) returns all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, svd_len, ntel)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.generate">
<code class="sig-name descname">generate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">regen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">skip_svd</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">skip_svd_inv</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Save out all beam transfer matrices to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regen</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Force regeneration even if cache files exist (default: False).</p></li>
<li><p><strong>skip_svd</strong> (<em>boolen</em><em>, </em><em>optional</em>) – Skip SVD beam generation. Saves time and space if you are only map making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.generate_cache">
<code class="sig-name descname">generate_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">regen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">skip_svd</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">skip_svd_inv</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.generate_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Save out all beam transfer matrices to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regen</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Force regeneration even if cache files exist (default: False).</p></li>
<li><p><strong>skip_svd</strong> (<em>boolen</em><em>, </em><em>optional</em>) – Skip SVD beam generation. Saves time and space if you are only map making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.invbeam_m">
<code class="sig-name descname">invbeam_m</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.invbeam_m" title="Permalink to this definition">¶</a></dt>
<dd><p>Pseudo-inverse of the beam (for a given m).</p>
<p>Uses the Moore-Penrose Pseudo-inverse as the optimal inverse for
reconstructing the data. No <cite>single</cite> option as this only makes sense
when combined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mi</strong> (<em>integer</em>) – m-mode to calculate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>invbeam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, npol_sky, lmax+1, 2, npairs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.invbeam_svd">
<code class="sig-name descname">invbeam_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">fi</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.invbeam_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the SVD beam transfer matrix (S V^H) for a given m. This SVD beam
transfer projects from the sky into the SVD basis.</p>
<p>This returns the full SVD spectrum. Cutting based on SVD value must be
done by other routines (see project*svd methods).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p></li>
<li><p><strong>fi</strong> (<em>integer</em>) – frequency block to fetch. fi=None (default) returns all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, svd_len, npol_sky, lmax+1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.ndof">
<code class="sig-name descname">ndof</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.ndof" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of degrees of freedom at a given m.</p>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.nfreq">
<em class="property">property </em><code class="sig-name descname">nfreq</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.nfreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of frequencies measured.</p>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.nsky">
<em class="property">property </em><code class="sig-name descname">nsky</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.nsky" title="Permalink to this definition">¶</a></dt>
<dd><p>Degrees of freedom on the sky at each frequency.</p>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.ntel">
<em class="property">property </em><code class="sig-name descname">ntel</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.ntel" title="Permalink to this definition">¶</a></dt>
<dd><p>Degrees of freedom measured by the telescope (per frequency)</p>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_matrix_diagonal_telescope_to_svd">
<code class="sig-name descname">project_matrix_diagonal_telescope_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">dmat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_matrix_diagonal_telescope_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a diagonal matrix from the telescope basis into the SVD basis.</p>
<p>This slightly specialised routine is for projecting the noise
covariance into the SVD space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [nfreq, ntel]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in SVD basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray [nsvd, nsvd]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_matrix_forward">
<code class="sig-name descname">project_matrix_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">mat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_matrix_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a covariance matrix from the sky into the visibility basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [pol, pol, l, freq, freq]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in telescope basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_matrix_sky_to_svd">
<code class="sig-name descname">project_matrix_sky_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">temponly</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_matrix_sky_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a covariance matrix from the sky into the SVD basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [pol, pol, l, freq, freq]. Must have pol
indices even if <cite>temponly=True</cite>.</p></li>
<li><p><strong>temponly</strong> (<em>boolean</em>) – Force projection of temperature (TT) part only (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in SVD basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray [nsvd, nsvd]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_matrix_sky_to_telescope">
<code class="sig-name descname">project_matrix_sky_to_telescope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">mat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_matrix_sky_to_telescope" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a covariance matrix from the sky into the visibility basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [pol, pol, l, freq, freq]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in telescope basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_backward">
<code class="sig-name descname">project_vector_backward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert a vector from the telescope space onto the sky. This is the
map-making process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [freq, baseline, polarisation]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tvec</strong> – Sky vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_forward">
<code class="sig-name descname">project_vector_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a vector from the sky into the visibility basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [nfreq, npol, lmax+1]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tvec</strong> – Telescope vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_sky_to_svd">
<code class="sig-name descname">project_vector_sky_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em>, <em class="sig-param"><span class="n">temponly</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_sky_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a vector from the the sky into the SVD basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [nfreq, lmax+1]</p></li>
<li><p><strong>temponly</strong> (<em>boolean</em>) – Force projection of temperature part only (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>svec</strong> – SVD vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_sky_to_telescope">
<code class="sig-name descname">project_vector_sky_to_telescope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_sky_to_telescope" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a vector from the sky into the visibility basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [nfreq, npol, lmax+1]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tvec</strong> – Telescope vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_svd_to_sky">
<code class="sig-name descname">project_vector_svd_to_sky</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em>, <em class="sig-param"><span class="n">temponly</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">conj</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_svd_to_sky" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a vector from the the sky into the SVD basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [nfreq, lmax+1]</p></li>
<li><p><strong>temponly</strong> (<em>boolean</em>) – Force projection of temperature part only (default: False)</p></li>
<li><p><strong>conj</strong> (<em>boolean</em>) – Reverse projection by applying conjugation (as opposed to pseudo-
inverse). Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>svec</strong> – SVD vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_svd_to_telescope">
<code class="sig-name descname">project_vector_svd_to_telescope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">svec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_svd_to_telescope" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a vector from the SVD basis into the original data basis.</p>
<p>This projection may be lose information about the sky, depending on the
polarisation filtering. This essentially uses the pseudo-inverse which
is simply related to the original projection matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>svec</strong> (<em>np.ndarray</em>) – SVD data vector.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>vec</strong> – Data vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray[freq, sign, baseline]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_telescope_to_sky">
<code class="sig-name descname">project_vector_telescope_to_sky</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_telescope_to_sky" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert a vector from the telescope space onto the sky. This is the
map-making process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [freq, baseline, polarisation]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tvec</strong> – Sky vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.project_vector_telescope_to_svd">
<code class="sig-name descname">project_vector_telescope_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.project_vector_telescope_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a vector from the telescope space into the SVD basis.</p>
<p>This projection may be lose information about the sky, depending on
the polarisation filtering.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Telescope data vector packed as [freq, baseline, polarisation]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>svec</strong> – SVD vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray[svdnum]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.svd_all">
<code class="sig-name descname">svd_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.svd_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects the full SVD spectrum for all m-modes.</p>
<p>Reads in from file on disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>svarray</strong> – The full set of singular values across all m-modes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray[mmax+1, nfreq, svd_len]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransfer.svd_len">
<em class="property">property </em><code class="sig-name descname">svd_len</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransfer.svd_len" title="Permalink to this definition">¶</a></dt>
<dd><p>The size of the SVD output matrices.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="drift.core.beamtransfer.BeamTransferFullSVD">
<em class="property">class </em><code class="sig-prename descclassname">drift.core.beamtransfer.</code><code class="sig-name descname">BeamTransferFullSVD</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">telescope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferFullSVD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#drift.core.beamtransfer.BeamTransfer" title="drift.core.beamtransfer.BeamTransfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">drift.core.beamtransfer.BeamTransfer</span></code></a></p>
<p>BeamTransfer class that performs the old temperature only SVD.</p>
<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferFullSVD.svd_len">
<em class="property">property </em><code class="sig-name descname">svd_len</code><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferFullSVD.svd_len" title="Permalink to this definition">¶</a></dt>
<dd><p>The size of the SVD output matrices.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD">
<em class="property">class </em><code class="sig-prename descclassname">drift.core.beamtransfer.</code><code class="sig-name descname">BeamTransferNoSVD</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">telescope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#drift.core.beamtransfer.BeamTransfer" title="drift.core.beamtransfer.BeamTransfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">drift.core.beamtransfer.BeamTransfer</span></code></a></p>
<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.beam_svd">
<code class="sig-name descname">beam_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.beam_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the SVD beam transfer matrix (S V^H) for a given m. This SVD beam
transfer projects from the sky into the SVD basis.</p>
<p>This returns the full SVD spectrum. Cutting based on SVD value must be
done by other routines (see project*svd methods).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – m-mode to fetch.</p></li>
<li><p><strong>fi</strong> (<em>integer</em>) – frequency block to fetch. fi=None (default) returns all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beam</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray (nfreq, svd_len, npol_sky, lmax+1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.ndof">
<code class="sig-name descname">ndof</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.ndof" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of degrees of freedom at a given m.</p>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.project_matrix_diagonal_telescope_to_svd">
<code class="sig-name descname">project_matrix_diagonal_telescope_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">dmat</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.project_matrix_diagonal_telescope_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a diagonal matrix from the telescope basis into the SVD basis.</p>
<p>This slightly specialised routine is for projecting the noise
covariance into the SVD space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [nfreq, ntel]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in SVD basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray [nsvd, nsvd]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.project_matrix_sky_to_svd">
<code class="sig-name descname">project_matrix_sky_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.project_matrix_sky_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a covariance matrix from the sky into the SVD basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – Sky matrix packed as [pol, pol, l, freq, freq]. Must have pol
indices even if <cite>temponly=True</cite>.</p></li>
<li><p><strong>temponly</strong> (<em>boolean</em>) – Force projection of temperature (TT) part only (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tmat</strong> – Covariance in SVD basis.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray [nsvd, nsvd]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.project_vector_sky_to_svd">
<code class="sig-name descname">project_vector_sky_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.project_vector_sky_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Project a vector from the the sky into the SVD basis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Sky data vector packed as [nfreq, lmax+1]</p></li>
<li><p><strong>temponly</strong> (<em>boolean</em>) – Force projection of temperature part only (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>svec</strong> – SVD vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="drift.core.beamtransfer.BeamTransferNoSVD.project_vector_telescope_to_svd">
<code class="sig-name descname">project_vector_telescope_to_svd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mi</span></em>, <em class="sig-param"><span class="n">vec</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferNoSVD.project_vector_telescope_to_svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a vector from the telescope space into the SVD basis.</p>
<p>This projection may be lose information about the sky, depending on
the polarisation filtering.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mi</strong> (<em>integer</em>) – Mode index to fetch for.</p></li>
<li><p><strong>vec</strong> (<em>np.ndarray</em>) – Telescope data vector packed as [freq, baseline, polarisation]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>svec</strong> – SVD vector to return.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray[svdnum]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="drift.core.beamtransfer.BeamTransferTempSVD">
<em class="property">class </em><code class="sig-prename descclassname">drift.core.beamtransfer.</code><code class="sig-name descname">BeamTransferTempSVD</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">telescope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.BeamTransferTempSVD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#drift.core.beamtransfer.BeamTransfer" title="drift.core.beamtransfer.BeamTransfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">drift.core.beamtransfer.BeamTransfer</span></code></a></p>
<p>BeamTransfer class that performs the old temperature only SVD.</p>
</dd></dl>

<dl class="py function">
<dt id="drift.core.beamtransfer.svd_gen">
<code class="sig-prename descclassname">drift.core.beamtransfer.</code><code class="sig-name descname">svd_gen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">errmsg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#drift.core.beamtransfer.svd_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the inverse of A.</p>
<p>If a standard matrix inverse has issues try using the pseudo-inverse.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>A</strong> (<em>np.ndarray</em>) – Matrix to invert.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>inv</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="drift.core.html" class="btn btn-neutral float-left" title="drift.core" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="drift.core.crosspower.html" class="btn btn-neutral float-right" title="drift.core.crosspower" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014, J. Richard Shaw.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>